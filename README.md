# Claude Code Desktop

Flutter æ¡Œé¢å®¢æˆ·ç«¯ï¼Œé€šè¿‡ ACP (Agent Communication Protocol) åè®®ä¸Ž Claude Code CLI é€šä¿¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ðŸ¤– **ACP åè®®é€šä¿¡** - å®Œæ•´å®žçŽ° ACP åè®®ï¼Œä¸Ž Claude Code CLI äº¤äº’
- ðŸ’¬ **æµå¼å“åº”** - å®žæ—¶æ˜¾ç¤º AI å›žå¤ï¼Œæ”¯æŒæ€è€ƒè¿‡ç¨‹å±•ç¤º
- ðŸ”§ **å·¥å…·è°ƒç”¨** - æ˜¾ç¤ºæ–‡ä»¶è¯»å†™ã€ä»£ç æ‰§è¡Œç­‰å·¥å…·è°ƒç”¨çŠ¶æ€
- ðŸ” **æƒé™æŽ§åˆ¶** - æ–‡ä»¶æ“ä½œéœ€è¦ç”¨æˆ·ç¡®è®¤
- ðŸ“‹ **è®¡åˆ’å±•ç¤º** - æ˜¾ç¤º AI çš„æ‰§è¡Œè®¡åˆ’
- ðŸ“ **æ–‡ä»¶é¢„è§ˆ** - æµè§ˆå’Œé¢„è§ˆé¡¹ç›®æ–‡ä»¶
- ðŸ’¾ **åŽ†å²æŒä¹…åŒ–** - ä¼šè¯å’Œæ¶ˆæ¯è‡ªåŠ¨ä¿å­˜
- âš™ï¸ **è®¾ç½®ç•Œé¢** - è‡ªå®šä¹‰å·¥ä½œç›®å½•ã€æƒé™ã€å¤–è§‚
- ðŸŽ¨ **Claude é£Žæ ¼ UI** - å‚ç…§ Claude.ai è®¾è®¡

## æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter Desktop App                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Layer                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Sidebar â”‚ â”‚ ChatArea â”‚ â”‚ Welcome â”‚ â”‚ FilePreview  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State Management (Provider)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ChatProvider   â”‚  â”‚  SettingsProvider           â”‚   â”‚
â”‚  â”‚  - ä¼šè¯ç®¡ç†      â”‚  â”‚  - è®¾ç½®ç®¡ç†                  â”‚   â”‚
â”‚  â”‚  - æ¶ˆæ¯å¤„ç†      â”‚  â”‚  - æƒé™é…ç½®                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ACP Protocol Layer                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  AcpConnection                                   â”‚    â”‚
â”‚  â”‚  - JSON-RPC é€šä¿¡                                 â”‚    â”‚
â”‚  â”‚  - ä¼šè¯ç®¡ç† (session/new, session/prompt)        â”‚    â”‚
â”‚  â”‚  - æ¶ˆæ¯å¤„ç† (agent_message_chunk, tool_call)     â”‚    â”‚
â”‚  â”‚  - æƒé™å¤„ç† (request_permission)                 â”‚    â”‚
â”‚  â”‚  - æ–‡ä»¶æ“ä½œ (fs/read_text_file, fs/write_text)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Claude Code CLI (å­è¿›ç¨‹)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  npx @anthropics/claude-code --acp              â”‚    â”‚
â”‚  â”‚  (é€šè¿‡ stdin/stdout è¿›è¡Œ JSON-RPC é€šä¿¡)           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ACP åè®®å®žçŽ°

### æ”¯æŒçš„æ¶ˆæ¯ç±»åž‹

| ç±»åž‹ | æè¿° |
|------|------|
| `agent_message_chunk` | AI å›žå¤å†…å®¹ï¼ˆæµå¼ï¼‰ |
| `agent_thought_chunk` | AI æ€è€ƒè¿‡ç¨‹ |
| `tool_call` | å·¥å…·è°ƒç”¨ï¼ˆè¯»/å†™/æ‰§è¡Œï¼‰ |
| `tool_call_update` | å·¥å…·è°ƒç”¨çŠ¶æ€æ›´æ–° |
| `plan` | æ‰§è¡Œè®¡åˆ’ |
| `available_commands_update` | å¯ç”¨å‘½ä»¤æ›´æ–° |
| `request_permission` | æƒé™è¯·æ±‚ |

### æ¶ˆæ¯æµç¨‹

```
Client                              Claude Code CLI
  â”‚                                       â”‚
  â”‚â”€â”€â”€â”€ initialize â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚<â”€â”€â”€ result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                                       â”‚
  â”‚â”€â”€â”€â”€ session/new â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚<â”€â”€â”€ result (sessionId) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                                       â”‚
  â”‚â”€â”€â”€â”€ session/prompt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚<â”€â”€â”€ session/update (thought_chunk) â”€â”€â”€â”‚
  â”‚<â”€â”€â”€ session/update (message_chunk) â”€â”€â”€â”‚
  â”‚<â”€â”€â”€ session/update (tool_call) â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚<â”€â”€â”€ request_permission â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚â”€â”€â”€â”€ response (allow/reject) â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚<â”€â”€â”€ session/update (tool_call_update) â”‚
  â”‚<â”€â”€â”€ result (end_turn) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                                       â”‚
```

## å®‰è£…è¦æ±‚

### 1. å®‰è£… Flutter

```bash
# macOS
brew install flutter

# æˆ–ä»Žå®˜ç½‘ä¸‹è½½
# https://docs.flutter.dev/get-started/install
```

### 2. å®‰è£… CocoaPods (macOS)

```bash
brew install cocoapods
```

### 3. å¯ç”¨æ¡Œé¢æ”¯æŒ

```bash
flutter config --enable-macos-desktop
flutter config --enable-windows-desktop
flutter config --enable-linux-desktop
```

### 4. å®‰è£… Claude Code CLI

```bash
npm install -g @anthropics/claude-code
```

### 5. ç™»å½• Claude Code

```bash
claude login
```

## æž„å»ºå’Œè¿è¡Œ

### å¼€å‘æ¨¡å¼

```bash
# åˆ›å»ºå¹³å°æ–‡ä»¶
flutter create --platforms=macos,windows,linux .

# è¿›å…¥ macos ç›®å½•å®‰è£… pods
cd macos && pod install && cd ..

# èŽ·å–ä¾èµ–
flutter pub get

# è¿è¡Œåº”ç”¨
flutter run -d macos
```

### ç”Ÿäº§æž„å»º

```bash
# macOS
flutter build macos --release

# Windows
flutter build windows --release

# Linux
flutter build linux --release
```

## é¡¹ç›®ç»“æž„

```
lib/
â”œâ”€â”€ main.dart                      # åº”ç”¨å…¥å£
â”œâ”€â”€ acp/
â”‚   â”œâ”€â”€ acp_connection.dart        # ACP åè®®å®žçŽ°
â”‚   â””â”€â”€ acp_types.dart             # ACP ç±»åž‹å®šä¹‰
â”œâ”€â”€ providers/
â”‚   â”œâ”€â”€ chat_provider.dart         # èŠå¤©çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ settings_provider.dart     # è®¾ç½®ç®¡ç†
â”œâ”€â”€ services/
â”‚   â””â”€â”€ storage_service.dart       # æŒä¹…åŒ–å­˜å‚¨
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ home_screen.dart           # ä¸»ç•Œé¢
â”‚   â””â”€â”€ settings_screen.dart       # è®¾ç½®ç•Œé¢
â””â”€â”€ widgets/
    â”œâ”€â”€ sidebar.dart               # ä¾§è¾¹æ 
    â”œâ”€â”€ chat_area.dart             # èŠå¤©åŒºåŸŸ
    â”œâ”€â”€ title_bar.dart             # æ ‡é¢˜æ 
    â””â”€â”€ file_preview_panel.dart    # æ–‡ä»¶é¢„è§ˆ
```

## ä½¿ç”¨è¯´æ˜Ž

1. **å¯åŠ¨åº”ç”¨** - è¿è¡Œ Claude Code Desktop
2. **é€‰æ‹©å·¥ä½œç›®å½•** - åœ¨æ¬¢è¿Žé¡µé¢é€‰æ‹©é¡¹ç›®ç›®å½•
3. **å¼€å§‹å¯¹è¯** - è¾“å…¥æ¶ˆæ¯ï¼ŒæŒ‰ Enter å‘é€
4. **æƒé™ç¡®è®¤** - å½“ Claude éœ€è¦è¯»å†™æ–‡ä»¶æ—¶ï¼Œç‚¹å‡»å…è®¸æˆ–æ‹’ç»
5. **æŸ¥çœ‹å·¥å…·è°ƒç”¨** - å®žæ—¶æŸ¥çœ‹æ–‡ä»¶æ“ä½œã€ä»£ç æ‰§è¡ŒçŠ¶æ€
6. **å¤šä¼šè¯** - ä¾§è¾¹æ ç®¡ç†å¤šä¸ªé¡¹ç›®ä¼šè¯

## ä¸Ž AionUi çš„å¯¹æ¯”

| ç‰¹æ€§ | AionUi | Claude Code Desktop |
|------|--------|---------------------|
| æ¡†æž¶ | Electron + React | Flutter |
| è¯­è¨€ | TypeScript | Dart |
| åŒ…å¤§å° | ~200MB | ~50MB |
| å†…å­˜å ç”¨ | è¾ƒé«˜ | è¾ƒä½Ž |
| å¤šåŽç«¯æ”¯æŒ | âœ… (Claude, Gemini, Qwen) | Claude only |
| WebUI æ¨¡å¼ | âœ… | âŒ |
| ACP åè®® | âœ… å®Œæ•´å®žçŽ° | âœ… å®Œæ•´å®žçŽ° |

## æ³¨æ„äº‹é¡¹

- éœ€è¦å…ˆå®‰è£…å¹¶ç™»å½• Claude Code CLI
- ç¡®ä¿ `npx` å‘½ä»¤å¯ç”¨
- é¦–æ¬¡è¿žæŽ¥å¯èƒ½éœ€è¦ç­‰å¾…å‡ ç§’é’Ÿ
- æ–‡ä»¶æ“ä½œéœ€è¦ç”¨æˆ·ç¡®è®¤æƒé™

## License

MIT License
